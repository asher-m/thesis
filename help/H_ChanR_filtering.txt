f['H_Flux_ChanR'][:, :, 0:16]
Out[27]:
array([[[  0.00000000e+00,   0.00000000e+00,   0.00000000e+00, ...,
           0.00000000e+00,   0.00000000e+00,  -9.99999985e+30],
        [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00, ...,
           0.00000000e+00,   0.00000000e+00,  -9.99999985e+30],
        [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00, ...,
           0.00000000e+00,   0.00000000e+00,  -9.99999985e+30],
        ...,
        [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00, ...,
           0.00000000e+00,   0.00000000e+00,  -9.99999985e+30],
        [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00, ...,
           0.00000000e+00,   0.00000000e+00,  -9.99999985e+30],
        [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00, ...,
           0.00000000e+00,   0.00000000e+00,  -9.99999985e+30]],

       [[  0.00000000e+00,   0.00000000e+00,   0.00000000e+00, ...,
           0.00000000e+00,   0.00000000e+00,  -9.99999985e+30],
        [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00, ...,
           0.00000000e+00,   0.00000000e+00,  -9.99999985e+30],
        [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00, ...,
           0.00000000e+00,   0.00000000e+00,  -9.99999985e+30],
        ...,
        [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00, ...,
           0.00000000e+00,   0.00000000e+00,  -9.99999985e+30],
        [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00, ...,
           0.00000000e+00,   0.00000000e+00,  -9.99999985e+30],
        [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00, ...,
           0.00000000e+00,   0.00000000e+00,  -9.99999985e+30]],

       [[  0.00000000e+00,   0.00000000e+00,   0.00000000e+00, ...,
           0.00000000e+00,   0.00000000e+00,  -9.99999985e+30],
        [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00, ...,
           0.00000000e+00,   0.00000000e+00,  -9.99999985e+30],
        [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00, ...,
           0.00000000e+00,   0.00000000e+00,  -9.99999985e+30],
        ...,
        [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00, ...,
           0.00000000e+00,   0.00000000e+00,  -9.99999985e+30],
        [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00, ...,
           0.00000000e+00,   0.00000000e+00,  -9.99999985e+30],
        [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00, ...,
           0.00000000e+00,   0.00000000e+00,  -9.99999985e+30]],

       ...,
       [[  0.00000000e+00,   0.00000000e+00,   0.00000000e+00, ...,
           0.00000000e+00,   0.00000000e+00,  -9.99999985e+30],
        [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00, ...,
           0.00000000e+00,   0.00000000e+00,  -9.99999985e+30],
        [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00, ...,
           0.00000000e+00,   0.00000000e+00,  -9.99999985e+30],
        ...,
        [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00, ...,
           0.00000000e+00,   0.00000000e+00,  -9.99999985e+30],
        [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00, ...,
           0.00000000e+00,   0.00000000e+00,  -9.99999985e+30],
        [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00, ...,
           0.00000000e+00,   0.00000000e+00,  -9.99999985e+30]],

       [[  0.00000000e+00,   0.00000000e+00,   0.00000000e+00, ...,
           0.00000000e+00,   0.00000000e+00,  -9.99999985e+30],
        [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00, ...,
           0.00000000e+00,   0.00000000e+00,  -9.99999985e+30],
        [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00, ...,
           0.00000000e+00,   0.00000000e+00,  -9.99999985e+30],
        ...,
        [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00, ...,
           0.00000000e+00,   0.00000000e+00,  -9.99999985e+30],
        [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00, ...,
           0.00000000e+00,   0.00000000e+00,  -9.99999985e+30],
        [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00, ...,
           0.00000000e+00,   0.00000000e+00,  -9.99999985e+30]],

       [[  0.00000000e+00,   0.00000000e+00,   0.00000000e+00, ...,
           0.00000000e+00,   0.00000000e+00,  -9.99999985e+30],
        [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00, ...,
           0.00000000e+00,   0.00000000e+00,  -9.99999985e+30],
        [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00, ...,
           0.00000000e+00,   0.00000000e+00,  -9.99999985e+30],
        ...,
        [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00, ...,
           0.00000000e+00,   0.00000000e+00,  -9.99999985e+30],
        [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00, ...,
           0.00000000e+00,   0.00000000e+00,  -9.99999985e+30],
        [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00, ...,
           0.00000000e+00,   0.00000000e+00,  -9.99999985e+30]]], dtype=float32)

In [28]: f['H_Flux_ChanR']
Out[28]:
<Var:
CDF_FLOAT [17279, 80, 48]
>

In [29]: f['H_Flux_ChanR'][:, :, 0:15]
Out[29]:
array([[[ 0.,  0.,  0., ...,  0.,  0.,  0.],
        [ 0.,  0.,  0., ...,  0.,  0.,  0.],
        [ 0.,  0.,  0., ...,  0.,  0.,  0.],
        ...,
        [ 0.,  0.,  0., ...,  0.,  0.,  0.],
        [ 0.,  0.,  0., ...,  0.,  0.,  0.],
        [ 0.,  0.,  0., ...,  0.,  0.,  0.]],

       [[ 0.,  0.,  0., ...,  0.,  0.,  0.],
        [ 0.,  0.,  0., ...,  0.,  0.,  0.],
        [ 0.,  0.,  0., ...,  0.,  0.,  0.],
        ...,
        [ 0.,  0.,  0., ...,  0.,  0.,  0.],
        [ 0.,  0.,  0., ...,  0.,  0.,  0.],
        [ 0.,  0.,  0., ...,  0.,  0.,  0.]],

       [[ 0.,  0.,  0., ...,  0.,  0.,  0.],
        [ 0.,  0.,  0., ...,  0.,  0.,  0.],
        [ 0.,  0.,  0., ...,  0.,  0.,  0.],
        ...,
        [ 0.,  0.,  0., ...,  0.,  0.,  0.],
        [ 0.,  0.,  0., ...,  0.,  0.,  0.],
        [ 0.,  0.,  0., ...,  0.,  0.,  0.]],

       ...,
       [[ 0.,  0.,  0., ...,  0.,  0.,  0.],
        [ 0.,  0.,  0., ...,  0.,  0.,  0.],
        [ 0.,  0.,  0., ...,  0.,  0.,  0.],
        ...,
        [ 0.,  0.,  0., ...,  0.,  0.,  0.],
        [ 0.,  0.,  0., ...,  0.,  0.,  0.],
        [ 0.,  0.,  0., ...,  0.,  0.,  0.]],

       [[ 0.,  0.,  0., ...,  0.,  0.,  0.],
        [ 0.,  0.,  0., ...,  0.,  0.,  0.],
        [ 0.,  0.,  0., ...,  0.,  0.,  0.],
        ...,
        [ 0.,  0.,  0., ...,  0.,  0.,  0.],
        [ 0.,  0.,  0., ...,  0.,  0.,  0.],
        [ 0.,  0.,  0., ...,  0.,  0.,  0.]],

       [[ 0.,  0.,  0., ...,  0.,  0.,  0.],
        [ 0.,  0.,  0., ...,  0.,  0.,  0.],
        [ 0.,  0.,  0., ...,  0.,  0.,  0.],
        ...,
        [ 0.,  0.,  0., ...,  0.,  0.,  0.],
        [ 0.,  0.,  0., ...,  0.,  0.,  0.],
        [ 0.,  0.,  0., ...,  0.,  0.,  0.]]], dtype=float32)

In [30]: f['H_ChanR_Energy'][0, 0, :]
Out[30]:
array([  6.98314362e+01,   8.45482712e+01,   9.10867920e+01,
         9.79973831e+01,   1.10415520e+02,   1.31560242e+02,
         1.59845673e+02,   1.98085327e+02,   2.86484283e+02,
         4.92699585e+02,   8.86268921e+02,   1.63016187e+03,
         3.02608325e+03,   5.63659912e+03,   8.32024512e+03,
        -9.99999985e+30,  -9.99999985e+30,  -9.99999985e+30,
        -9.99999985e+30,  -9.99999985e+30,  -9.99999985e+30,
        -9.99999985e+30,  -9.99999985e+30,  -9.99999985e+30,
        -9.99999985e+30,  -9.99999985e+30,  -9.99999985e+30,
        -9.99999985e+30,  -9.99999985e+30,  -9.99999985e+30,
        -9.99999985e+30,  -9.99999985e+30,  -9.99999985e+30,
        -9.99999985e+30,  -9.99999985e+30,  -9.99999985e+30,
        -9.99999985e+30,  -9.99999985e+30,  -9.99999985e+30,
        -9.99999985e+30,  -9.99999985e+30,  -9.99999985e+30,
        -9.99999985e+30,  -9.99999985e+30,  -9.99999985e+30,
        -9.99999985e+30,  -9.99999985e+30,  -9.99999985e+30], dtype=float32)

In [31]:

In [31]: f['H_ChanR_Energy'][0, 0, 0:15]
Out[31]:
array([   69.83143616,    84.54827118,    91.08679199,    97.99738312,
         110.41551971,   131.5602417 ,   159.84567261,   198.08532715,
         286.48428345,   492.69958496,   886.2689209 ,  1630.16186523,
        3026.08325195,  5636.59912109,  8320.24511719], dtype=float32)

In [32]: flux = f['H_Flux_ChanR'][:, :, 0:15]

In [33]: flux[flux < 0] = numpy.nan
---------------------------------------------------------------------------
NameError                                 Traceback (most recent call last)
<ipython-input-33-06e7103d8aad> in <module>()
----> 1 flux[flux < 0] = numpy.nan

NameError: name 'numpy' is not defined

In [34]: import numpy

In [35]: flux[flux < 0] = numpy.nan

In [36]: numpy.nanmean(flux, axis=1)
Out[36]:
array([[  0.        ,   0.        ,   0.        , ...,   0.        ,
          0.        ,   0.        ],
       [  0.        ,   0.        ,   0.        , ...,   0.        ,
          0.        ,   0.        ],
       [  0.        ,   0.        ,   0.        , ...,   0.        ,
          0.        ,  14.57220173],
       ...,
       [  0.        ,   0.        ,   0.        , ...,   0.        ,
          0.        ,   0.        ],
       [  0.        ,   0.        ,   0.        , ...,   0.        ,
          0.        ,   0.        ],
       [  0.        ,   0.        ,   0.        , ...,   0.        ,
          0.        ,   0.        ]], dtype=float32)

In [37]: numpy.nanmean(flux, axis=1).shape
Out[37]: (17279, 15)

In [38]: f['Epoch_ChanR'][0]
Out[38]: datetime.datetime(2019, 4, 1, 0, 0, 4, 23922)

In [39]: output = numpy.empty(shape=(24, 15), dtype=numpy.float)

In [40]: for hour in range(24):
   ....:
   ....:     print()
   ....:
()
()
()
()
()
()
()
()
()
()
()
()
()
()
()
()
()
()
()
()
()
()
()
()

In [41]: epoch = f['Epoch_ChanR'][...]

In [42]: for hour in range(24):
   ....:     starttime = epoch[0].replace(hour=hour, minute=0, second=0, microsecond=0)
   ....:     stoptime = starttime + datetime.timedelta(hours=1)
   ....:     startix = numpy.searchsorted(epoch, starttime)
   ....:     stopidx = numpy.searchsorted(epoch, stoptime)
   ....:     output[hour, :] = numpy.nanmean(numpy.nanmean(flux, axis=1)[startidx:stopidx, :], axis=0)
   ....:
---------------------------------------------------------------------------
NameError                                 Traceback (most recent call last)
<ipython-input-42-3824e2e8eaa5> in <module>()
      4     startix = numpy.searchsorted(epoch, starttime)
      5     stopidx = numpy.searchsorted(epoch, stoptime)
----> 6     output[hour, :] = numpy.nanmean(numpy.nanmean(flux, axis=1)[startidx:stopidx, :], axis=0)
      7

NameError: name 'startidx' is not defined

In [43]: for hour in range(24):
    starttime = epoch[0].replace(hour=hour, minute=0, second=0, microsecond=0)
    stoptime = starttime + datetime.timedelta(hours=1)
    startix = numpy.searchsorted(epoch, starttime)
    stopidx = numpy.searchsorted(epoch, stoptime)
    output[hour, :] = numpy.nanmean(numpy.nanmean(flux, axis=1)[startix:stopidx, :], axis=0)
   ....:

In [44]: output.shape
Out[44]: (24, 15)

In [45]: output
Out[45]:
array([[  0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   5.58250467e-04,
          4.33537789e-04,   4.58496739e-04,   6.36989309e-04,
          0.00000000e+00,   0.00000000e+00,   9.63023961e-01],
       [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   7.45739341e-01],
       [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   1.21516385e-03,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   6.39566779e-01],
       [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   9.83702600e-01],
       [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   5.27007796e-04,   2.05252110e-03,
          0.00000000e+00,   0.00000000e+00,   8.94338131e-01],
       [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   4.20170277e-03,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          5.55817678e-04,   0.00000000e+00,   0.00000000e+00,
          9.43897816e-04,   0.00000000e+00,   9.39364374e-01],
       [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          4.33537789e-04,   0.00000000e+00,   0.00000000e+00,
          9.43897816e-04,   0.00000000e+00,   5.94393730e-01],
       [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   2.06448534e-03,
          0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   5.87816350e-04,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   6.99481606e-01],
       [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          8.67075578e-04,   0.00000000e+00,   7.10488122e-04,
          0.00000000e+00,   0.00000000e+00,   8.70119154e-01],
       [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          4.98319278e-04,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   7.25339592e-01],
       [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   5.58250467e-04,
          0.00000000e+00,   4.58496739e-04,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   8.69422913e-01],
       [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   4.85677941e-04,
          0.00000000e+00,   0.00000000e+00,   7.10488122e-04,
          0.00000000e+00,   0.00000000e+00,   9.91104543e-01],
       [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          4.33537789e-04,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   1.06871426e+00],
       [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   4.85677941e-04,
          0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   1.01175880e+00],
       [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   5.87816350e-04,   1.33117056e-03,
          8.46253242e-04,   0.00000000e+00,   1.00742793e+00],
       [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   4.20170277e-03,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   5.27007796e-04,   5.54180704e-04,
          0.00000000e+00,   0.00000000e+00,   7.85641491e-01],
       [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   5.58250467e-04,
          0.00000000e+00,   0.00000000e+00,   7.10488122e-04,
          0.00000000e+00,   0.00000000e+00,   9.45137024e-01],
       [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          4.98319278e-04,   0.00000000e+00,   0.00000000e+00,
          3.67071363e-03,   0.00000000e+00,   7.21762419e-01],
       [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          1.03783293e-03,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   6.65531695e-01],
       [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   1.21516385e-03,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   9.05390322e-01],
       [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          4.33537789e-04,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   8.71978223e-01],
       [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   9.17829156e-01],
       [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   9.11121190e-01],
       [  1.41272806e-02,   1.10342830e-01,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
          4.34140762e-04,   0.00000000e+00,   0.00000000e+00,
          9.45210631e-04,   0.00000000e+00,   8.71560812e-01]])

In [46]:

